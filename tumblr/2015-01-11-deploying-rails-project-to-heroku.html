<style>:root{--left-side:200px;--right-side:200px;--nav-height:64px;--background-color:#FFD166;--primary-color:#06D6A0;--primary-accent-color:#049F76;--secondary-color:#118AB2;--sub-color:#073B4C;--nav-background:#fff;--article-background:#fff
    }body.svelte-1gr3n62.svelte-1gr3n62{padding:0;margin:0;color:var(--sub-color);background:var(--background-color);font-family:Roboto, "Helvetica Neue", Arial, sans-serif;font-size:18px;display:grid;grid-template:var(--nav-height) auto var(--nav-height)/var(--left-side) calc(100% - var(--left-side) - var(--right-side)) var(--right-side)
    }nav.top.svelte-1gr3n62 .links.svelte-1gr3n62{grid-area:1/2/2/3;display:flex;align-items:center
    }nav.top.svelte-1gr3n62 .links a.svelte-1gr3n62{margin-right:1em
    }a.svelte-1gr3n62.svelte-1gr3n62{color:var(--secondary-color);text-decoration:none
    }a.svelte-1gr3n62.svelte-1gr3n62:hover,a.svelte-1gr3n62.svelte-1gr3n62:active{color:var(--sub-color)
    }footer.svelte-1gr3n62.svelte-1gr3n62{grid-area:3/1/4/4;background:#fff;display:inline-grid;grid-template:100%/var(--left-side) auto var(--right-side)
    }nav.top.svelte-1gr3n62.svelte-1gr3n62{background-color:var(--nav-background);display:inline-grid;grid-template:100%/var(--left-side) auto var(--right-side);grid-area:1/1/2/4
    }main.svelte-1gr3n62.svelte-1gr3n62{grid-area:2/2/3/3;margin-top:1em;display:flex;flex-direction:column
    }@media screen and (max-width: 1340px){:root{--left-side:0px;--right-side:0px
        }body.svelte-1gr3n62.svelte-1gr3n62{background:var(--background-color)
        }nav.top.svelte-1gr3n62 .links.svelte-1gr3n62{justify-content:space-around
        }}
.btn.svelte-7idbpu{display:inline-flex;font-size:18px;color:#fff;background:var(--primary-color);padding:10px;border-radius:8px
    }.btn.svelte-7idbpu:hover{background:var(--primary-accent-color);color:#fff
    }</style><!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="/images/favicon-compressed.webp">
    <link rel="shortcut icon" href="/images/favicon-compressed.webp">
    <link rel="apple-touch-icon" href="/images/favicon-compressed.webp">

    <link rel="stylesheet" href="/shared.css">
    <link rel="stylesheet" href="/prism.css">

    <title>Document</title></head>
<body class="svelte-1gr3n62"><nav class="top svelte-1gr3n62">
            <div class="links svelte-1gr3n62"><a class="nav-link nav-item svelte-1gr3n62" href="/">Home</a>
                <a class="nav-link nav-item svelte-1gr3n62" href="/about/">About</a></div>
        </nav>

    <main class="svelte-1gr3n62"><article><h1>Deploying Rails project to Heroku</h1>

    <time>11 Jan 2015 at 14:45</time>

    <div class="content"><p>First of all, set up the <strong>Heroku Toolbelt</strong>. It is required for all the communications with the server.</p>

<p>The first step of communication with the Heroku servers is logging in. Just run <code>heroku login</code> and provide your credentials when asked.</p>

<p>Then, you need to create your application or go to the folder where it is located and tune it a bit. Tuning is divided into the following steps:</p>

<ul><li>tuning the <code>Gemfile</code> to include the required gems</li>
<li>fixing the <code>database.yml</code> configurations</li>
<li>setting the server to handle static assets correctly</li>
</ul><p>But let&rsquo;s create out application on the Heroku servers first: <code>heroku create [app_name]</code>. If application name is not provided directly - it will be generated automatically.</p>

<p>Now, our application needs two gems to be included for the <code>production</code> gems&rsquo; group:</p>

<pre><code class="language-ruby">group <span class="token symbol">:production</span> <span class="token keyword">do</span>
    gem <span class="token string-literal"><span class="token string">'pg'</span></span>
    gem <span class="token string-literal"><span class="token string">'rails_12factor'</span></span>
    gem <span class="token string-literal"><span class="token string">'puma'</span></span>
<span class="token keyword">end</span>
</code></pre>
<p>The third gem is used as a webserver instead of WebRick, which is default <em>(puma is much, much faster!)</em>. The second one is required by Heroku. And the first one is used for PostgreSQL connectivity. If you do not wish to use database - skip it and a few next paragraphs.</p>

<p>Then, let&rsquo;s add the database support for our application. It&rsquo;s done simply, running</p>

<pre><code>heroku addons:add heroku-postgresql:hobby-dev
</code></pre>

<p><strong>Note:</strong> Heroku does not support <code>sqlite</code> since some times. This means you are forced to use either PostgreSQL or no database at all <em>(yes, it&rsquo;s possible! Yet, it works for simple or static web applications only&hellip;)</em>. You may want to change this if you would pay for your account. But this tutorial covers only free side of the Heroku deployment.</p>

<p>Now, there are two ways to set database connection options in Rails:</p>

<ol><li>set them directly at <code>config/database.yml</code> file</li>
<li>set the environment variable <code>DATABASE_URL</code></li>
</ol><p>We will cover both cases. For the first one, you will need this section within your <code>database.yml</code> file:</p>

<pre><code class="language-yaml"><span class="token key atrule">production</span><span class="token punctuation">:</span>
    <span class="token key atrule">adapter</span><span class="token punctuation">:</span> postgresql
    <span class="token key atrule">encoding</span><span class="token punctuation">:</span> unicode
    <span class="token key atrule">pool</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> URL_GOES_HERE
</code></pre>
<p>I will show how to get the <code>&lt;URL_GOES_HERE&gt;</code> value in a second. Just keep in mind to replace it with the correct value.</p>

<p>The second option, the environment variable, is set via the Heroku Toolbelt <em>(did I tell you, it is used for almost every deploy operation you will perform?)</em>.</p>

<p>First you take the database URL from Heroku server:</p>

<pre><code class="language-bash">heroku config <span class="token operator">|</span> <span class="token function">grep</span> HEROKU_POSTGRESQL
</code></pre>
<p>Then, you copy the value you got <em>(it starts with <code>postgres://</code>)</em> and run the following:</p>

<pre><code class="language-bash">heroku config:set <span class="token assign-left variable">DATABASE_URL</span><span class="token operator">=</span>URL_GOES_HERE
</code></pre>
<p>Now let&rsquo;s set our application to serve static assets. It is handy, because it is the easiest way to send images, stylesheets and javascripts to clients. Go to the <code>config/environments/production.rb</code> and change both <code>config.serve_static_assets</code> and <code>config.assets.compile</code> to <code>true</code>.</p>

<p><strong>But beware:</strong> if your <code>app/assets</code> files directory contains files of other extensions than Rails&rsquo; <strong>Sprockets</strong> understands - Rails (and Heroku, particularly) will try to precompile them. And that may cause many troubles. You are recommended either to &ldquo;teach&rdquo; Sprockets to skip or precompile those files, <strong>or</strong> you should exclude them from project before deploying to Heroku.</p>

<p>And the last two steps separate us from our goal: first, you should push your project to Heroku&rsquo; Git repository, it created for you with the application <em>(You do not use Git yet?! How dare you?!..)</em>.</p>

<p>Now, if you use database, run migrations with <code>heroku run rake db:migrate</code>.</p>

<p>And, finally, see your application running in the browser: <code>heroku open</code>.</p>

<p><strong>Note:</strong> if you are using some assets from the outer web (GoogleFonts, for example) and are seeing your website through the <code>https</code> protocol, you should replace all those assets&rsquo; URL protocols with <code>https</code> too.</p>
</div>
</article></main>

    

    <script src="/lazyLoadImages.js"></script></body>
</html>